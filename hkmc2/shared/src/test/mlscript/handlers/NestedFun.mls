:js
:effectHandlers


fun foo(f) =
  let y = 1
  fun bar() =
    f()
    set y += 1
  let lam = () => y
  bar()
  set y += 1
  lam()

:expect 3
handle h = Object with
  fun f()(k) = k(())
foo(() => h.f())
//â”‚ = 3

fun foo() =
  let y = 1
  fun bar() =
    set y += 1
