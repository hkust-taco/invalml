:js


:sjs
module Foo with
  val self: module Foo = Foo
//│ JS (unsanitized):
//│ let Foo1;
//│ (class Foo {
//│   static {
//│     Foo1 = Foo;
//│     this.self = Foo1;
//│   }
//│   static toString() { return "Foo"; }
//│ });

Foo.self
//│ = Foo


module Foo with
  val self: module Foo = this

Foo.self
//│ = Foo


:e
module Foo with
  val self = this
//│ ╔══[ERROR] Functions returning module values must have explicit return types.
//│ ║  l.30: 	  val self = this
//│ ╙──      	      ^^^^

Foo.self
//│ = Foo


object Foo with
  val self = this

Foo.self
//│ = Foo


:todo // * Initialization error
:sjs
object Foo with
  val self = Foo
//│ JS (unsanitized):
//│ let Foo9;
//│ const Foo$class1 = class Foo8 {
//│   constructor() {
//│     this.self = Foo9;
//│   }
//│   toString() { return "Foo"; }
//│ }; Foo9 = new Foo$class1;
//│ Foo9.class = Foo$class1;

:re
Foo.self
//│ ═══[RUNTIME ERROR] Error: Access to required field 'self' yielded 'undefined'


