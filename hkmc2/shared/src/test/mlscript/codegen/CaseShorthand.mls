:js


case x then x
//│ = [function]

:sjs
case { x then x }
//│ JS (unsanitized):
//│ let lambda1; lambda1 = (undefined, function (caseScrut) { let x; x = caseScrut; return x }); lambda1
//│ = [function]

:sjs
x => if x is
  0 then true
//│ JS (unsanitized):
//│ let lambda2;
//│ lambda2 = (undefined, function (x) {
//│   if (x === 0) {
//│     return true
//│   } else {
//│     throw new globalThis.Error("match error");
//│   }
//│ });
//│ lambda2
//│ = [function]

:sjs
case 0 then true
//│ JS (unsanitized):
//│ let lambda3;
//│ lambda3 = (undefined, function (caseScrut) {
//│   if (caseScrut === 0) {
//│     return true
//│   } else {
//│     throw new globalThis.Error("match error");
//│   }
//│ });
//│ lambda3
//│ = [function]

(case x then x) of 1
//│ = 1

1 |> case x then x
//│ = 1

1 |> id of case x then x
//│ = 1

[1] |> case [x] then x
//│ = 1

1 |> (2 |> case x then case y then [x, y]) |> case [a, b] then [b, a]
//│ = [1, 2]

:todo // TODO: support this braceless syntax?
case [x] then x, [] then 0
//│ ╔══[ERROR] Unexpected infix use of 'then' keyword here
//│ ║  l.58: 	case [x] then x, [] then 0
//│ ╙──      	                 ^^^^^^^^^
//│ ╔══[WARNING] Pure expression in statement position
//│ ║  l.58: 	case [x] then x, [] then 0
//│ ╙──      	      ^^^^^^^^^

:sjs
case
  0 then true
  _ then false
//│ JS (unsanitized):
//│ let lambda11;
//│ lambda11 = (undefined, function (caseScrut) {
//│   if (caseScrut === 0) {
//│     return true
//│   } else {
//│     return false
//│   }
//│ });
//│ lambda11
//│ = [function]

data class Some(value)
object None

:sjs
val isDefined = case
  Some then true
  None then false
//│ JS (unsanitized):
//│ let isDefined, tmp6, lambda12;
//│ lambda12 = (undefined, function (caseScrut) {
//│   if (caseScrut instanceof Some1.class) {
//│     return true
//│   } else if (caseScrut instanceof None1.class) {
//│     return false
//│   } else {
//│     throw new globalThis.Error("match error");
//│   }
//│ });
//│ tmp6 = lambda12;
//│ isDefined = tmp6;
//│ isDefined = [function]

